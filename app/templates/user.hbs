<div class="user rounded-md justify-self-stretch flex flex-col p-2 h-full">
  <div class="bg-white bg-opacity-7 p-4 text-white flex items-center justify-between">
    <h4 class="text-2xl font-bold">
      {{t "chart.title"}}
    </h4>
    <Button type="button" {{on "click" this.refresh}}>
      <svg height="24" width="24" viewBox="0 0 24 24">
        <path
          fill="currentColor"
          d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"
        />
      </svg>
    </Button>
  </div>
  <div class="bg-white bg-opacity-5 flex flex-col items-center justify-center flex-grow p-4">
    <Loading @loading={{this.loading}}>
      {{#if this.error}}
        <div class="flex flex-col justify-center items-center bg-clip-content">
          {{#each this.messages as |m|}}
            <p class="text-center text-gray-100 text-sm m-2">
              {{m.message}}
            </p>
          {{/each}}
          {{#if (eq this.error "DateRange")}}
            <a class="text-main-500 text-sm" href={{this.user.url}} target="_blank" rel="noopener noreferrer">
              {{t "messages.anilist_instructions"}}
            </a>
          {{/if}}
        </div>
      {{else}}
        <Chart
          @list={{@model.userData.list}}
          @lang={{this.lang}}
        />
        <div class="controls grid items-center justify-items-center">
          <div class="language text-center flex flex-col">
            <label class="sr-only" for="lang-select">
              {{t "chart.language.title"}}
            </label>
            <div class="inline-block relative w-64">
              <Select
                id="lang-select"
                class="block w-full"
                {{on "change" this.updateLang}}
              >
                <Option value="user" selected={{eq this.lang "user"}}>
                  {{t "chart.language.user"}}
                </Option>
                <Option value="english" selected={{eq this.lang "english"}}>
                  {{t "chart.language.english"}}
                </Option>
                <Option value="romaji" selected={{eq this.lang "romaji"}}>
                  {{t "chart.language.romaji"}}
                </Option>
                <Option value="native" selected={{eq this.lang "native"}}>
                  {{t "chart.language.native"}}
                </Option>
              </Select>
            </div>
          </div>
        </div>
      {{/if}}
    </Loading>
  </div>
</div>