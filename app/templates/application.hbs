{{page-title "AniHistory"}}

<div class="main grid">
  <div class="nav bg-gray-800 justify-self-stretch self-stretch w-full px-4 flex flex-wrap items-center justify-between">
    <LinkTo
      class="font-mono italic text-white text-lg"
      @route="application"
      {{on "click" this.user.wipe}}
    >
      {{t "project_name"}}
    </LinkTo>
    {{#if (and this.user.username this.user.avatar)}}
      <div class="hidden md:flex items-center justify-between">
        <img
          class="avatar rounded"
          src={{this.user.avatar}}
          alt={{this.user.username}}
        >
        <a
          class="text-main-500 ml-2"
          href={{this.user.url}}
          target="_blank" rel="noopener noreferrer"
        >
          {{this.user.username}}
        </a>
      </div>
    {{/if}}
    <section class="hidden md:flex flex-nowrap items-center h-full">
      <div class="relative">
        <label
          class="sr-only"
          for="user-search"
        >
          {{t "navigation-bar.username"}}
        </label>
        <StyledInput
          id="user-search"
          class="w-full"
          type="text"
          placeholder={{t "navigation-bar.username"}}
          @value={{this.user.username}}
          @enter={{fn this.user.goTo this.user.username}}
        />
        <svg
          class="absolute search-icon text-gray-400 text-opacity-65"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 20 20"
          stroke="currentColor"
        >
          <path
            fill="currentColor"
            d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"
          />
        </svg>
      </div>
    </section>
    <div class="md:hidden text-white text-opacity-80">
      <Button {{on "click" (fn (mut this.mobileMenuOpen) true)}}>
        |||
      </Button>
      {{#if this.mobileMenuOpen}}
        <div class="absolute top-0 right-0 w-[85%] h-full bg-gray-900 z-10">
          <div class="flex justify-between p-4">
            {{#if (and this.user.username this.user.avatar)}}
              <div class="hidden md:flex items-center justify-between">
                <img
                  class="avatar rounded"
                  src={{this.user.avatar}}
                  alt={{this.user.username}}
                >
                <a
                  class="text-main-500 ml-2"
                  href={{this.user.url}}
                  target="_blank" rel="noopener noreferrer"
                >
                  {{this.user.username}}
                </a>
              </div>
            {{/if}}
            <Button class="self-start" {{on "click" (fn (mut this.mobileMenuOpen) false)}}>
              X
            </Button>
          </div>
          <section class="flex flex-nowrap items-center w-full p-4">
            <div class="relative">
              <label
                class="sr-only"
                for="user-search"
              >
                {{t "navigation-bar.username"}}
              </label>
              <StyledInput
                id="user-search-mobile"
                class="w-full"
                type="text"
                placeholder={{t "navigation-bar.username"}}
                @value={{this.user.username}}
                @enter={{this.goToUser}}
              />
              <svg
                class="absolute search-icon text-gray-400 text-opacity-65"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 20 20"
                stroke="currentColor"
              >
                <path
                  fill="currentColor"
                  d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"
                />
              </svg>
            </div>
          </section>
        </div>
      {{/if}}
    </div>
  </div>

  <div class="content justify-self-stretch self-strech h-full px-4">
    {{outlet}}
  </div>
</div>