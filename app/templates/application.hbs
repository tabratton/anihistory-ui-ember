{{page-title "AniHistory"}}

<div class="main grid">
  <div class="nav bg-gray-800 justify-self-stretch self-stretch w-full px-4 flex flex-wrap items-center justify-between">
    <LinkTo
      class="font-mono italic text-white text-lg"
      @route="application"
      {{on "click" this.user.wipe}}
    >
      {{t "project_name"}}
    </LinkTo>
    {{#if (and this.user.username this.user.avatar)}}
      <div class="hidden md:flex items-center justify-between">
        <img
          class="avatar rounded"
          src={{this.user.avatar}}
          alt={{this.user.username}}
        >
        <a
          class="text-main-500 ml-2"
          href={{this.user.url}}
          target="_blank" rel="noopener noreferrer"
        >
          {{this.user.username}}
        </a>
      </div>
    {{/if}}
    <section class="hidden md:flex flex-nowrap items-center h-full">
      <div class="relative">
        <label
          class="sr-only"
          for="user-search"
        >
          {{t "navigation-bar.username"}}
        </label>
        <StyledInput
          id="user-search"
          class="w-full"
          type="text"
          placeholder={{t "navigation-bar.username"}}
          @value={{this.user.username}}
          @enter={{fn this.user.goTo this.user.username}}
        />
        <FaIcon class="absolute search-icon text-gray-400 text-opacity-65" @icon="magnifying-glass" @fixedWidth={{true}} />
      </div>
    </section>
    <div class="md:hidden text-white text-opacity-80">
      <Button {{on "click" (fn (mut this.mobileMenuOpen) true)}}>
        <FaIcon @icon="bars" @fixedWidth={{true}} />
      </Button>
      {{#if this.mobileMenuOpen}}
        <div class="absolute top-0 right-0 w-[85%] h-full bg-gray-900 z-10">
          <div class="flex justify-between p-4">
            {{#if (and this.user.username this.user.avatar)}}
              <div class="hidden md:flex items-center justify-between">
                <img
                  class="avatar rounded"
                  src={{this.user.avatar}}
                  alt={{this.user.username}}
                >
                <a
                  class="text-main-500 ml-2"
                  href={{this.user.url}}
                  target="_blank" rel="noopener noreferrer"
                >
                  {{this.user.username}}
                </a>
              </div>
            {{/if}}
            <Button class="self-start" {{on "click" (fn (mut this.mobileMenuOpen) false)}}>
              <FaIcon @icon="xmark" @fixedWidth={{true}} />
            </Button>
          </div>
          <section class="flex flex-nowrap items-center w-full p-4">
            <div class="relative">
              <label
                class="sr-only"
                for="user-search"
              >
                {{t "navigation-bar.username"}}
              </label>
              <StyledInput
                id="user-search-mobile"
                class="w-full"
                type="text"
                placeholder={{t "navigation-bar.username"}}
                @value={{this.user.username}}
                @enter={{this.goToUser}}
              />
              <FaIcon class="absolute search-icon text-gray-400 text-opacity-65" @icon="magnifying-glass" @fixedWidth={{true}} />
            </div>
          </section>
        </div>
      {{/if}}
    </div>
  </div>

  <div class="content justify-self-stretch self-stretch h-full px-4">
    {{outlet}}
  </div>
</div>